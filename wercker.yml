box: golang:1.13

dev:
  steps:
    - internal/watch:
        code: go run main.go
        reload: true

build:
  steps:
    - internal/docker-build:
        box: golang:1.13.5-alpine3.10 as builder
        dockerfile: Dockerfile
        image-name: gobot
        ports: "8383"
    - internal/docker-push:
        box: resin/rpi-raspbian:latest
        username: $USERNAME
        password: $PASSWORD
        port: "8383"
        tag: 0.0.1
        repository: tttmaximttt/gobot
        registry: https://registry.hub.docker.com

deploy:
  steps:
    - internal/docker-push:
        username: $USERNAME
        password: $PASSWORD
        port: "8383"
        tag: 0.0.1
        repository: tttmaximttt/gobot
        registry: https://registry.hub.docker.com